#!/bin/sh
. "$(dirname "$0")/_/husky.sh"

echo "[husky] Running pre-commit quality checks..."

# Step 1: ESLint
echo "[husky] Step 1/3: Running ESLint..."
npx eslint "src/**/*.{js,jsx,ts,tsx}" || {
  echo "[husky] ESLint failed. Please review and fix the issues above."
  exit 1
}

# Step 2: TypeScript type checking
echo "[husky] Step 2/3: Running TypeScript type check..."
npx tsc --noEmit || {
  echo "[husky] TypeScript type check failed. Please review and fix the issues above."
  exit 1
}

# Step 3: Prettier formatting check
echo "[husky] Step 3/3: Verifying code formatting with Prettier..."
npx prettier --check "src/**/*.{js,jsx,ts,tsx,json,css,scss,md}" || {
  echo "[husky] Code formatting check failed."
  echo "[husky] Run 'npx prettier --write .' to fix formatting issues."
  exit 1
}

echo "[husky] All checks passed"
